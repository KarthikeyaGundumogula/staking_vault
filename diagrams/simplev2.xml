<mxfile host="app.diagrams.net" modified="2024-11-20T00:00:00.000Z" agent="5.0" version="22.0.0" etag="depin123" type="device" pages="2">
	<!-- PAGE 1: NON-TECHNICAL DIAGRAM -->
	<diagram id="non-technical" name="Non-Technical Overview">
		<mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1100" math="0" shadow="0">
			<root>
				<mxCell id="0" />
				<mxCell id="1" parent="0" />
				<!-- Title -->
				<mxCell id="title-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=none;" vertex="1" parent="1">
					<mxGeometry x="50" y="30" width="1500" height="100" as="geometry" />
				</mxCell>
				<mxCell id="title" value="DePIN Staking Vault Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=36;fontStyle=1;fontColor=#3F51B5;" vertex="1" parent="1">
					<mxGeometry x="500" y="45" width="600" height="45" as="geometry" />
				</mxCell>
				<mxCell id="subtitle" value="How Providers, Stakers, and NFT Positions Work Together" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="450" y="95" width="700" height="25" as="geometry" />
				</mxCell>
				<!-- DePIN Network (Top) -->
				<mxCell id="depin-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="600" y="170" width="400" height="140" as="geometry" />
				</mxCell>
				<mxCell id="depin-title" value="DePIN NETWORK" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#0D47A1;" vertex="1" parent="1">
					<mxGeometry x="650" y="190" width="300" height="35" as="geometry" />
				</mxCell>
				<mxCell id="depin-desc" value="Real-world infrastructure&#xa;(5G, EV charging, WiFi, etc.)&#xa;&#xa;Generates revenue from operations" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="620" y="235" width="360" height="65" as="geometry" />
				</mxCell>
				<!-- Provider (Left) -->
				<mxCell id="provider-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C5CAE9;strokeColor=#3F51B5;strokeWidth=4;" vertex="1" parent="1">
					<mxGeometry x="100" y="380" width="350" height="280" as="geometry" />
				</mxCell>
				<mxCell id="provider-icon" value="ðŸ¢" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=48;" vertex="1" parent="1">
					<mxGeometry x="240" y="400" width="70" height="60" as="geometry" />
				</mxCell>
				<mxCell id="provider-title" value="PROVIDER" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=26;fontStyle=1;fontColor=#1A237E;" vertex="1" parent="1">
					<mxGeometry x="125" y="470" width="300" height="35" as="geometry" />
				</mxCell>
				<mxCell id="provider-role" value="Infrastructure Owner" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=2;fontColor=#5C6BC0;" vertex="1" parent="1">
					<mxGeometry x="125" y="510" width="300" height="25" as="geometry" />
				</mxCell>
				<mxCell id="provider-actions" value="â€¢ Opens vaults&#xa;â€¢ Deposits rewards&#xa;â€¢ Chooses trusted stakers&#xa;â€¢ Uses stake for operations" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="140" y="550" width="270" height="95" as="geometry" />
				</mxCell>
				<!-- Staking Vault (Center) -->
				<mxCell id="vault-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;strokeWidth=5;" vertex="1" parent="1">
					<mxGeometry x="550" y="380" width="500" height="280" as="geometry" />
				</mxCell>
				<mxCell id="vault-icon" value="ðŸ¦" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=48;" vertex="1" parent="1">
					<mxGeometry x="765" y="400" width="70" height="60" as="geometry" />
				</mxCell>
				<mxCell id="vault-title" value="STAKING VAULT" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=26;fontStyle=1;fontColor=#F57F17;" vertex="1" parent="1">
					<mxGeometry x="600" y="470" width="400" height="35" as="geometry" />
				</mxCell>
				<mxCell id="vault-subtitle" value="1:1 Binding Between Provider &amp; Staker" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=2;fontColor=#F57F17;" vertex="1" parent="1">
					<mxGeometry x="580" y="510" width="440" height="25" as="geometry" />
				</mxCell>
				<!-- Vault Contents -->
				<mxCell id="vault-left" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#F57F17;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="580" y="550" width="200" height="90" as="geometry" />
				</mxCell>
				<mxCell id="vault-left-title" value="ðŸ’° Holdings" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontStyle=1;fontColor=#F57F17;" vertex="1" parent="1">
					<mxGeometry x="590" y="560" width="180" height="25" as="geometry" />
				</mxCell>
				<mxCell id="vault-left-content" value="â€¢ Staked tokens&#xa;â€¢ Reward pool" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="600" y="590" width="160" height="40" as="geometry" />
				</mxCell>
				<mxCell id="vault-right" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#F57F17;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="820" y="550" width="200" height="90" as="geometry" />
				</mxCell>
				<mxCell id="vault-right-title" value="âš™ï¸ Rules" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontStyle=1;fontColor=#F57F17;" vertex="1" parent="1">
					<mxGeometry x="830" y="560" width="180" height="25" as="geometry" />
				</mxCell>
				<mxCell id="vault-right-content" value="â€¢ Min/Max amounts&#xa;â€¢ Lock duration" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="840" y="590" width="160" height="40" as="geometry" />
				</mxCell>
				<!-- Staker (Right) -->
				<mxCell id="staker-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B2DFDB;strokeColor=#00897B;strokeWidth=4;" vertex="1" parent="1">
					<mxGeometry x="1150" y="380" width="350" height="280" as="geometry" />
				</mxCell>
				<mxCell id="staker-icon" value="ðŸ‘¤" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=48;" vertex="1" parent="1">
					<mxGeometry x="1290" y="400" width="70" height="60" as="geometry" />
				</mxCell>
				<mxCell id="staker-title" value="STAKER" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=26;fontStyle=1;fontColor=#004D40;" vertex="1" parent="1">
					<mxGeometry x="1175" y="470" width="300" height="35" as="geometry" />
				</mxCell>
				<mxCell id="staker-role" value="Trusted Participant" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=2;fontColor=#00897B;" vertex="1" parent="1">
					<mxGeometry x="1175" y="510" width="300" height="25" as="geometry" />
				</mxCell>
				<mxCell id="staker-actions" value="â€¢ Stakes tokens&#xa;â€¢ Increases stake&#xa;â€¢ Earns 100% rewards&#xa;â€¢ Owns vault NFT" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="1190" y="550" width="270" height="95" as="geometry" />
				</mxCell>
				<!-- NFT Position Box -->
				<mxCell id="nft-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;strokeWidth=3;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
					<mxGeometry x="650" y="730" width="300" height="130" as="geometry" />
				</mxCell>
				<mxCell id="nft-icon" value="ðŸŽ«" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=36;" vertex="1" parent="1">
					<mxGeometry x="770" y="745" width="60" height="50" as="geometry" />
				</mxCell>
				<mxCell id="nft-title" value="NFT POSITION" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#880E4F;" vertex="1" parent="1">
					<mxGeometry x="670" y="800" width="260" height="25" as="geometry" />
				</mxCell>
				<mxCell id="nft-desc" value="Represents ownership&#xa;Can be traded on marketplace" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="670" y="830" width="260" height="25" as="geometry" />
				</mxCell>
				<!-- NFT Marketplace -->
				<mxCell id="marketplace-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="650" y="920" width="300" height="130" as="geometry" />
				</mxCell>
				<mxCell id="marketplace-icon" value="ðŸª" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=36;" vertex="1" parent="1">
					<mxGeometry x="770" y="935" width="60" height="50" as="geometry" />
				</mxCell>
				<mxCell id="marketplace-title" value="NFT MARKETPLACE" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#4A148C;" vertex="1" parent="1">
					<mxGeometry x="670" y="990" width="260" height="25" as="geometry" />
				</mxCell>
				<mxCell id="marketplace-desc" value="Trade vault positions&#xa;Transfer ownership via NFT" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="670" y="1020" width="260" height="25" as="geometry" />
				</mxCell>
				<!-- Arrows -->
				<!-- Provider to DePIN -->
				<mxCell id="arrow-provider-depin" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#1976D2;fillColor=#1976D2;endFill=1;startArrow=block;startFill=1;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="275" y="380" as="sourcePoint" />
						<mxPoint x="650" y="310" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-provider-depin" value="Uses stake&#xa;for operations&#xa;&#xa;Earns revenue" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#1976D2;" vertex="1" parent="1">
					<mxGeometry x="350" y="310" width="100" height="60" as="geometry" />
				</mxCell>
				<!-- DePIN to Provider (rewards) -->
				<mxCell id="label-depin-provider" value="Generates&#xa;rewards" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#1976D2;" vertex="1" parent="1">
					<mxGeometry x="500" y="310" width="90" height="40" as="geometry" />
				</mxCell>
				<!-- Provider to Vault -->
				<mxCell id="arrow-provider-vault" value="" style="endArrow=block;html=1;strokeWidth=4;strokeColor=#3F51B5;fillColor=#3F51B5;endFill=1;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="450" y="490" as="sourcePoint" />
						<mxPoint x="550" y="490" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-provider-vault" value="Opens vault&#xa;Deposits rewards" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#3F51B5;" vertex="1" parent="1">
					<mxGeometry x="430" y="430" width="120" height="45" as="geometry" />
				</mxCell>
				<!-- Staker to Vault -->
				<mxCell id="arrow-staker-vault" value="" style="endArrow=block;html=1;strokeWidth=4;strokeColor=#00897B;fillColor=#00897B;endFill=1;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="1150" y="490" as="sourcePoint" />
						<mxPoint x="1050" y="490" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-staker-vault" value="Stakes tokens&#xa;Increases stake" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#00897B;" vertex="1" parent="1">
					<mxGeometry x="1050" y="430" width="100" height="45" as="geometry" />
				</mxCell>
				<!-- Vault to Staker (return) -->
				<mxCell id="arrow-vault-staker" value="" style="endArrow=block;html=1;strokeWidth=4;strokeColor=#E65100;fillColor=#E65100;endFill=1;dashed=1;dashPattern=8 8;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="1050" y="570" as="sourcePoint" />
						<mxPoint x="1150" y="570" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-vault-staker" value="Returns stake&#xa;+ ALL rewards" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#E65100;" vertex="1" parent="1">
					<mxGeometry x="1050" y="590" width="100" height="45" as="geometry" />
				</mxCell>
				<!-- Vault to NFT -->
				<mxCell id="arrow-vault-nft" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#C2185B;fillColor=#C2185B;endFill=1;dashed=1;dashPattern=8 8;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="800" y="660" as="sourcePoint" />
						<mxPoint x="800" y="730" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-vault-nft" value="Represented by&#xa;1:1 NFT binding" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#C2185B;" vertex="1" parent="1">
					<mxGeometry x="820" y="675" width="120" height="40" as="geometry" />
				</mxCell>
				<!-- NFT to Marketplace -->
				<mxCell id="arrow-nft-marketplace" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#7B1FA2;fillColor=#7B1FA2;endFill=1;startArrow=block;startFill=1;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="800" y="860" as="sourcePoint" />
						<mxPoint x="800" y="920" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-nft-marketplace" value="Trade position&#xa;Transfer ownership" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#7B1FA2;" vertex="1" parent="1">
					<mxGeometry x="820" y="870" width="120" height="40" as="geometry" />
				</mxCell>
			</root>
		</mxGraphModel>
	</diagram>
	<!-- PAGE 2: TECHNICAL DIAGRAM -->
	<diagram id="technical" name="Technical Architecture">
		<mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1400" math="0" shadow="0">
			<root>
				<mxCell id="0" />
				<mxCell id="1" parent="0" />
				<!-- Title -->
				<mxCell id="tech-title-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#263238;strokeColor=none;" vertex="1" parent="1">
					<mxGeometry x="50" y="30" width="1700" height="100" as="geometry" />
				</mxCell>
				<mxCell id="tech-title" value="DePIN Staking Vault - Technical Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=36;fontStyle=1;fontColor=#FFFFFF;" vertex="1" parent="1">
					<mxGeometry x="500" y="45" width="800" height="45" as="geometry" />
				</mxCell>
				<mxCell id="tech-subtitle" value="On-Chain Programs, PDAs, Token Accounts; &amp Data Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#B0BEC5;" vertex="1" parent="1">
					<mxGeometry x="500" y="95" width="800" height="25" as="geometry" />
				</mxCell>
				<!-- Actors Section -->
				<mxCell id="actors-label" value="ACTORS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#263238;" vertex="1" parent="1">
					<mxGeometry x="80" y="170" width="150" height="30" as="geometry" />
				</mxCell>
				<!-- Provider Actor -->
				<mxCell id="actor-provider" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="80" y="210" width="180" height="100" as="geometry" />
				</mxCell>
				<mxCell id="actor-provider-title" value="Provider" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#0D47A1;" vertex="1" parent="1">
					<mxGeometry x="100" y="225" width="140" height="25" as="geometry" />
				</mxCell>
				<mxCell id="actor-provider-desc" value="DePIN Operator&#xa;Vault Creator&#xa;Reward Depositor" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="100" y="255" width="140" height="45" as="geometry" />
				</mxCell>
				<!-- Staker Actor -->
				<mxCell id="actor-staker" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="80" y="340" width="180" height="100" as="geometry" />
				</mxCell>
				<mxCell id="actor-staker-title" value="Staker" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#1B5E20;" vertex="1" parent="1">
					<mxGeometry x="100" y="355" width="140" height="25" as="geometry" />
				</mxCell>
				<mxCell id="actor-staker-desc" value="Token Holder&#xa;NFT Owner&#xa;Reward Recipient" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="100" y="385" width="140" height="45" as="geometry" />
				</mxCell>
				<!-- Trader Actor -->
				<mxCell id="actor-trader" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD0;strokeColor=#C2185B;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="80" y="470" width="180" height="100" as="geometry" />
				</mxCell>
				<mxCell id="actor-trader-title" value="Trader" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#880E4F;" vertex="1" parent="1">
					<mxGeometry x="100" y="485" width="140" height="25" as="geometry" />
				</mxCell>
				<mxCell id="actor-trader-desc" value="NFT Buyer/Seller&#xa;Position Transferor&#xa;Marketplace User" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="100" y="515" width="140" height="45" as="geometry" />
				</mxCell>
				<!-- DePIN Network External -->
				<mxCell id="depin-external" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;strokeWidth=3;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
					<mxGeometry x="80" y="620" width="180" height="120" as="geometry" />
				</mxCell>
				<mxCell id="depin-external-title" value="DePIN Network" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#01579B;" vertex="1" parent="1">
					<mxGeometry x="100" y="640" width="140" height="25" as="geometry" />
				</mxCell>
				<mxCell id="depin-external-desc" value="(External)&#xa;Real Infrastructure&#xa;Revenue Source" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;fontStyle=2;" vertex="1" parent="1">
					<mxGeometry x="100" y="675" width="140" height="55" as="geometry" />
				</mxCell>
				<!-- Programs Section -->
				<mxCell id="programs-label" value="ON-CHAIN PROGRAMS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#263238;" vertex="1" parent="1">
					<mxGeometry x="320" y="170" width="300" height="30" as="geometry" />
				</mxCell>
				<!-- Staking Vault Program -->
				<mxCell id="program-staking" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;strokeWidth=4;" vertex="1" parent="1">
					<mxGeometry x="320" y="210" width="500" height="530" as="geometry" />
				</mxCell>
				<mxCell id="program-staking-title" value="staking_vault Program" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1;fontColor=#E65100;" vertex="1" parent="1">
					<mxGeometry x="370" y="230" width="400" height="30" as="geometry" />
				</mxCell>
				<mxCell id="program-staking-id" value="Program ID: DW9BXusirecGep9k5FXFDALYiY1HPtBpVWwPJ36ZD8KZ" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#424242;fontFamily=Courier New;" vertex="1" parent="1">
					<mxGeometry x="340" y="265" width="460" height="20" as="geometry" />
				</mxCell>
				<!-- Vault PDA -->
				<mxCell id="vault-pda" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="350" y="300" width="220" height="200" as="geometry" />
				</mxCell>
				<mxCell id="vault-pda-title" value="StakingVault PDA" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontStyle=1;fontColor=#E65100;" vertex="1" parent="1">
					<mxGeometry x="365" y="310" width="190" height="25" as="geometry" />
				</mxCell>
				<mxCell id="vault-pda-fields" value="â€¢ provider: Pubkey&#xa;â€¢ staker: Pubkey&#xa;â€¢ duration: u64&#xa;â€¢ start_time: u64&#xa;â€¢ staking_mint: Pubkey&#xa;â€¢ reward_mint: Pubkey&#xa;â€¢ nft_mint: Pubkey&#xa;â€¢ minimum_amount: u64&#xa;â€¢ maximum_amount: u64&#xa;â€¢ staked_value: u64&#xa;â€¢ rewards_value: u64" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#424242;fontFamily=Courier New;" vertex="1" parent="1">
					<mxGeometry x="365" y="340" width="190" height="150" as="geometry" />
				</mxCell>
				<!-- Vault Staking ATA -->
				<mxCell id="vault-staking-ata" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="350" y="520" width="220" height="100" as="geometry" />
				</mxCell>
				<mxCell id="vault-staking-ata-title" value="Vault Staking ATA" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontStyle=1;fontColor=#E65100;" vertex="1" parent="1">
					<mxGeometry x="365" y="530" width="190" height="25" as="geometry" />
				</mxCell>
				<mxCell id="vault-staking-ata-desc" value="Holds staked tokens&#xa;Mint: staking_mint&#xa;Authority: vault PDA" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="365" y="560" width="190" height="50" as="geometry" />
				</mxCell>
				<!-- Vault Reward ATA -->
				<mxCell id="vault-reward-ata" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="590" y="520" width="220" height="100" as="geometry" />
				</mxCell>
				<mxCell id="vault-reward-ata-title" value="Vault Reward ATA" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontStyle=1;fontColor=#E65100;" vertex="1" parent="1">
					<mxGeometry x="605" y="530" width="190" height="25" as="geometry" />
				</mxCell>
				<mxCell id="vault-reward-ata-desc" value="Holds reward tokens&#xa;Mint: reward_mint&#xa;Authority: vault PDA" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="605" y="560" width="190" height="50" as="geometry" />
				</mxCell>
				<!-- Instructions Box -->
				<mxCell id="instructions-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="590" y="300" width="220" height="200" as="geometry" />
				</mxCell>
				<mxCell id="instructions-title" value="Instructions" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontStyle=1;fontColor=#E65100;" vertex="1" parent="1">
					<mxGeometry x="605" y="310" width="190" height="25" as="geometry" />
				</mxCell>
				<mxCell id="instructions-list" value="â€¢ open()&#xa;â€¢ stake()&#xa;â€¢ increment_stake()&#xa;â€¢ deposit_rewards()&#xa;â€¢ unstake()&#xa;â€¢ close_vault()" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;fontStyle=1;" vertex="1" parent="1">
					<mxGeometry x="615" y="345" width="180" height="145" as="geometry" />
				</mxCell>
				<!-- NFT Marketplace Program -->
				<mxCell id="program-marketplace" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=4;" vertex="1" parent="1">
					<mxGeometry x="880" y="210" width="420" height="320" as="geometry" />
				</mxCell>
				<mxCell id="program-marketplace-title" value="nft_marketplace Program" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1;fontColor=#7B1FA2;" vertex="1" parent="1">
					<mxGeometry x="920" y="230" width="340" height="30" as="geometry" />
				</mxCell>
				<mxCell id="program-marketplace-id" value="Program ID: 3kLob38A4tG8m3fP9ZZwSWsjdr417DjQZ4bkqxGFjaUh" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#424242;fontFamily=Courier New;" vertex="1" parent="1">
					<mxGeometry x="900" y="265" width="380" height="20" as="geometry" />
				</mxCell>
				<!-- NFT Escrow -->
				<mxCell id="nft-escrow" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#7B1FA2;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="910" y="300" width="180" height="100" as="geometry" />
				</mxCell>
				<mxCell id="nft-escrow-title" value="NFT Escrow PDA" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontStyle=1;fontColor=#7B1FA2;" vertex="1" parent="1">
					<mxGeometry x="925" y="310" width="150" height="25" as="geometry" />
				</mxCell>
				<mxCell id="nft-escrow-desc" value="Temporarily holds&#xa;NFT during listing&#xa;Transfers on claim" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="925" y="340" width="150" height="50" as="geometry" />
				</mxCell>
				<!-- Marketplace Instructions -->
				<mxCell id="marketplace-instructions" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#7B1FA2;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="1100" y="300" width="180" height="100" as="geometry" />
				</mxCell>
				<mxCell id="marketplace-instructions-title" value="Instructions" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontStyle=1;fontColor=#7B1FA2;" vertex="1" parent="1">
					<mxGeometry x="1115" y="310" width="150" height="25" as="geometry" />
				</mxCell>
				<mxCell id="marketplace-instructions-list" value="â€¢ deposit_asset()&#xa;â€¢ claim_asset()&#xa;â€¢ burn_asset()" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;fontStyle=1;" vertex="1" parent="1">
					<mxGeometry x="1125" y="340" width="140" height="55" as="geometry" />
				</mxCell>
				<!-- Marketplace Description -->
				<mxCell id="marketplace-desc-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#7B1FA2;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="910" y="420" width="370" height="90" as="geometry" />
				</mxCell>
				<mxCell id="marketplace-desc-title" value="Responsibilities:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#7B1FA2;" vertex="1" parent="1">
					<mxGeometry x="925" y="430" width="340" height="20" as="geometry" />
				</mxCell>
				<mxCell id="marketplace-desc-text" value="â€¢ Manages NFT trading lifecycle&#xa;â€¢ Does NOT touch vault balances&#xa;â€¢ Only handles NFT ownership transfers" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="925" y="455" width="340" height="50" as="geometry" />
				</mxCell>
				<!-- MPL-Core Program -->
				<mxCell id="program-mpl" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00695C;strokeWidth=4;" vertex="1" parent="1">
					<mxGeometry x="880" y="570" width="420" height="170" as="geometry" />
				</mxCell>
				<mxCell id="program-mpl-title" value="MPL-Core Program (External)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1;fontColor=#00695C;" vertex="1" parent="1">
					<mxGeometry x="920" y="590" width="340" height="30" as="geometry" />
				</mxCell>
				<mxCell id="program-mpl-subtitle" value="(Metaplex Core Assets)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;fontStyle=2;" vertex="1" parent="1">
					<mxGeometry x="920" y="625" width="340" height="20" as="geometry" />
				</mxCell>
				<!-- NFT Components -->
				<mxCell id="nft-mint" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#00695C;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="910" y="660" width="180" height="60" as="geometry" />
				</mxCell>
				<mxCell id="nft-mint-title" value="Core Asset / NFT Mint" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#00695C;" vertex="1" parent="1">
					<mxGeometry x="925" y="670" width="150" height="20" as="geometry" />
				</mxCell>
				<mxCell id="nft-mint-desc" value="1 per vault&#xa;Stored in vault.nft_mint" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="925" y="693" width="150" height="22" as="geometry" />
				</mxCell>
				<mxCell id="nft-token-accounts" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#00695C;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="1100" y="660" width="180" height="60" as="geometry" />
				</mxCell>
				<mxCell id="nft-token-title" value="NFT Token Accounts" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#00695C;" vertex="1" parent="1">
					<mxGeometry x="1115" y="670" width="150" height="20" as="geometry" />
				</mxCell>
				<mxCell id="nft-token-desc" value="Owner: staker â†’ escrow â†’ buyer" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="1115" y="693" width="150" height="22" as="geometry" />
				</mxCell>
				<!-- Data Flow Section -->
				<mxCell id="dataflow-label" value="KEY DATA FLOWS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#263238;" vertex="1" parent="1">
					<mxGeometry x="320" y="780" width="300" height="30" as="geometry" />
				</mxCell>
				<!-- Flow 1: Open Vault -->
				<mxCell id="flow1-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="320" y="830" width="400" height="140" as="geometry" />
				</mxCell>
				<mxCell id="flow1-number" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1976D2;strokeColor=none;fontColor=#FFFFFF;fontSize=20;fontStyle=1;" vertex="1" parent="1">
					<mxGeometry x="340" y="850" width="45" height="45" as="geometry" />
				</mxCell>
				<mxCell id="flow1-title" value="OPEN VAULT" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=17;fontStyle=1;fontColor=#0D47A1;" vertex="1" parent="1">
					<mxGeometry x="400" y="855" width="150" height="25" as="geometry" />
				</mxCell>
				<mxCell id="flow1-steps" value="Provider calls open()&#xa;â†’ Creates Vault PDA&#xa;â†’ Creates token ATAs&#xa;â†’ Mints NFT to staker&#xa;â†’ Optional: deposits initial rewards" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="340" y="905" width="360" height="55" as="geometry" />
				</mxCell>
				<!-- Flow 2: Stake -->
				<mxCell id="flow2-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="760" y="830" width="400" height="140" as="geometry" />
				</mxCell>
				<mxCell id="flow2-number" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#388E3C;strokeColor=none;fontColor=#FFFFFF;fontSize=20;fontStyle=1;" vertex="1" parent="1">
					<mxGeometry x="780" y="850" width="45" height="45" as="geometry" />
				</mxCell>
				<mxCell id="flow2-title" value="STAKE TOKENS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=17;fontStyle=1;fontColor=#1B5E20;" vertex="1" parent="1">
					<mxGeometry x="840" y="855" width="180" height="25" as="geometry" />
				</mxCell>
				<mxCell id="flow2-steps" value="Staker calls stake(amount)&#xa;â†’ Validates amount (min/max)&#xa;â†’ Transfers from staker ATA to Vault Staking ATA&#xa;â†’ Updates vault.staked_value&#xa;â†’ Sets start_time" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="780" y="905" width="360" height="55" as="geometry" />
				</mxCell>
				<!-- Flow 3: Deposit Rewards -->
				<mxCell id="flow3-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="320" y="1000" width="400" height="140" as="geometry" />
				</mxCell>
				<mxCell id="flow3-number" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#F57F17;strokeColor=none;fontColor=#FFFFFF;fontSize=20;fontStyle=1;" vertex="1" parent="1">
					<mxGeometry x="340" y="1020" width="45" height="45" as="geometry" />
				</mxCell>
				<mxCell id="flow3-title" value="DEPOSIT REWARDS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=17;fontStyle=1;fontColor=#E65100;" vertex="1" parent="1">
					<mxGeometry x="400" y="1025" width="220" height="25" as="geometry" />
				</mxCell>
				<mxCell id="flow3-steps" value="Provider calls deposit_rewards(amount)&#xa;â†’ Validates provider authority&#xa;â†’ Transfers from provider ATA to Vault Reward ATA&#xa;â†’ Updates vault.rewards_value&#xa;â†’ Can be called multiple times" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="340" y="1075" width="360" height="55" as="geometry" />
				</mxCell>
				<!-- Flow 4: Unstake -->
				<mxCell id="flow4-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCCBC;strokeColor=#D84315;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="760" y="1000" width="400" height="140" as="geometry" />
				</mxCell>
				<mxCell id="flow4-number" value="4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#D84315;strokeColor=none;fontColor=#FFFFFF;fontSize=20;fontStyle=1;" vertex="1" parent="1">
					<mxGeometry x="780" y="1020" width="45" height="45" as="geometry" />
				</mxCell>
				<mxCell id="flow4-title" value="UNSTAKE" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=17;fontStyle=1;fontColor=#BF360C;" vertex="1" parent="1">
					<mxGeometry x="840" y="1025" width="150" height="25" as="geometry" />
				</mxCell>
				<mxCell id="flow4-steps" value="Staker calls unstake() after duration&#xa;â†’ Validates time elapsed >= duration&#xa;â†’ Transfers ALL from Vault Staking ATA to staker&#xa;â†’ Transfers ALL from Vault Reward ATA to staker&#xa;â†’ Resets vault balances to 0" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="780" y="1075" width="360" height="55" as="geometry" />
				</mxCell>
				<!-- Flow 5: Trade NFT -->
				<mxCell id="flow5-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="320" y="1170" width="400" height="140" as="geometry" />
				</mxCell>
				<mxCell id="flow5-number" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#7B1FA2;strokeColor=none;fontColor=#FFFFFF;fontSize=20;fontStyle=1;" vertex="1" parent="1">
					<mxGeometry x="340" y="1190" width="45" height="45" as="geometry" />
				</mxCell>
				<mxCell id="flow5-title" value="TRADE NFT (Marketplace)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=17;fontStyle=1;fontColor=#4A148C;" vertex="1" parent="1">
					<mxGeometry x="400" y="1195" width="280" height="25" as="geometry" />
				</mxCell>
				<mxCell id="flow5-steps" value="Seller calls deposit_asset()&#xa;â†’ NFT moves to escrow&#xa;Buyer calls claim_asset() (after payment)&#xa;â†’ NFT moves to buyer&#xa;â†’ Buyer now owns vault position" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="340" y="1245" width="360" height="55" as="geometry" />
				</mxCell>
				<!-- Flow 6: Close Vault -->
				<mxCell id="flow6-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="760" y="1170" width="400" height="140" as="geometry" />
				</mxCell>
				<mxCell id="flow6-number" value="6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#C62828;strokeColor=none;fontColor=#FFFFFF;fontSize=20;fontStyle=1;" vertex="1" parent="1">
					<mxGeometry x="780" y="1190" width="45" height="45" as="geometry" />
				</mxCell>
				<mxCell id="flow6-title" value="CLOSE VAULT" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=17;fontStyle=1;fontColor=#B71C1C;" vertex="1" parent="1">
					<mxGeometry x="840" y="1195" width="180" height="25" as="geometry" />
				</mxCell>
				<mxCell id="flow6-steps" value="Owner calls close_vault()&#xa;â†’ Validates both ATAs are empty (balance = 0)&#xa;â†’ Closes vault PDA and token accounts&#xa;â†’ Burns NFT via MPL-Core&#xa;â†’ Returns rent to designated recipient" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="780" y="1245" width="360" height="55" as="geometry" />
				</mxCell>
				<!-- Arrows between actors and programs -->
				<!-- Provider to Staking Program -->
				<mxCell id="arrow-provider-staking" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#1976D2;fillColor=#1976D2;endFill=1;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="260" y="260" as="sourcePoint" />
						<mxPoint x="320" y="360" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-provider-staking" value="open()&#xa;deposit_rewards()" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#1976D2;" vertex="1" parent="1">
					<mxGeometry x="240" y="290" width="100" height="35" as="geometry" />
				</mxCell>
				<!-- Staker to Staking Program -->
				<mxCell id="arrow-staker-staking" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#388E3C;fillColor=#388E3C;endFill=1;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="260" y="390" as="sourcePoint" />
						<mxPoint x="320" y="460" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-staker-staking" value="stake()&#xa;increment_stake()&#xa;unstake()" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#388E3C;" vertex="1" parent="1">
					<mxGeometry x="230" y="405" width="110" height="50" as="geometry" />
				</mxCell>
				<!-- Trader to Marketplace -->
				<mxCell id="arrow-trader-marketplace" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#C2185B;fillColor=#C2185B;endFill=1;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="260" y="520" as="sourcePoint" />
						<mxPoint x="880" y="360" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-trader-marketplace" value="deposit_asset()&#xa;claim_asset()" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#C2185B;" vertex="1" parent="1">
					<mxGeometry x="480" y="410" width="110" height="35" as="geometry" />
				</mxCell>
				<!-- Provider to DePIN -->
				<mxCell id="arrow-provider-depin" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#0277BD;fillColor=#0277BD;endFill=1;startArrow=block;startFill=1;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="170" y="310" as="sourcePoint" />
						<mxPoint x="170" y="620" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-provider-depin" value="Uses stakeâ†“&#xa;Revenueâ†‘" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#0277BD;" vertex="1" parent="1">
					<mxGeometry x="180" y="445" width="80" height="35" as="geometry" />
				</mxCell>
				<!-- Staking to MPL-Core -->
				<mxCell id="arrow-staking-mpl" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#00695C;fillColor=#00695C;endFill=1;dashed=1;dashPattern=8 8;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="700" y="740" as="sourcePoint" />
						<mxPoint x="960" y="740" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-staking-mpl" value="Mints NFT on open()&#xa;Burns NFT on close_vault()" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#00695C;" vertex="1" parent="1">
					<mxGeometry x="720" y="705" width="180" height="30" as="geometry" />
				</mxCell>
				<!-- Marketplace to MPL-Core -->
				<mxCell id="arrow-marketplace-mpl" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#7B1FA2;fillColor=#7B1FA2;endFill=1;dashed=1;dashPattern=8 8;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="1090" y="530" as="sourcePoint" />
						<mxPoint x="1090" y="570" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="label-marketplace-mpl" value="Transfers NFT&#xa;ownership" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#7B1FA2;" vertex="1" parent="1">
					<mxGeometry x="1100" y="530" width="100" height="35" as="geometry" />
				</mxCell>
				<!-- Legend -->
				<mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#424242;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="1360" y="210" width="400" height="250" as="geometry" />
				</mxCell>
				<mxCell id="legend-title" value="LEGEND" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#263238;" vertex="1" parent="1">
					<mxGeometry x="1480" y="225" width="160" height="30" as="geometry" />
				</mxCell>
				<mxCell id="legend-line1" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#1976D2;fillColor=#1976D2;endFill=1;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="1380" y="280" as="sourcePoint" />
						<mxPoint x="1450" y="280" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="legend-text1" value="Instruction Call" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="1460" y="268" width="140" height="25" as="geometry" />
				</mxCell>
				<mxCell id="legend-line2" value="" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#388E3C;fillColor=#388E3C;endFill=1;dashed=1;dashPattern=8 8;" edge="1" parent="1">
					<mxGeometry width="50" height="50" relative="1" as="geometry">
						<mxPoint x="1380" y="320" as="sourcePoint" />
						<mxPoint x="1450" y="320" as="targetPoint" />
					</mxGeometry>
				</mxCell>
				<mxCell id="legend-text2" value="Cross-Program Call" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="1460" y="308" width="160" height="25" as="geometry" />
				</mxCell>
				<mxCell id="legend-box1" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E65100;strokeColor=#E65100;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="1380" y="355" width="30" height="20" as="geometry" />
				</mxCell>
				<mxCell id="legend-text3" value="Main Staking Program" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="1420" y="352" width="180" height="25" as="geometry" />
				</mxCell>
				<mxCell id="legend-box2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#7B1FA2;strokeColor=#7B1FA2;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="1380" y="385" width="30" height="20" as="geometry" />
				</mxCell>
				<mxCell id="legend-text4" value="NFT Marketplace Program" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="1420" y="382" width="200" height="25" as="geometry" />
				</mxCell>
				<mxCell id="legend-box3" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#00695C;strokeColor=#00695C;strokeWidth=2;" vertex="1" parent="1">
					<mxGeometry x="1380" y="415" width="30" height="20" as="geometry" />
				</mxCell>
				<mxCell id="legend-text5" value="External MPL-Core Program" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="1420" y="412" width="210" height="25" as="geometry" />
				</mxCell>
				<!-- Key Points Box -->
				<mxCell id="keypoints-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="1360" y="490" width="400" height="250" as="geometry" />
				</mxCell>
				<mxCell id="keypoints-title" value="KEY ARCHITECTURAL POINTS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#E65100;" vertex="1" parent="1">
					<mxGeometry x="1390" y="505" width="340" height="30" as="geometry" />
				</mxCell>
				<mxCell id="keypoints-text" value="âœ“ 1:1 binding: One vault per provider-staker pair&#xa;&#xa;âœ“ NFT = ownership rights to vault position&#xa;&#xa;âœ“ Staking program holds ALL capital (tokens)&#xa;&#xa;âœ“ Marketplace ONLY handles NFT trading&#xa;&#xa;âœ“ Vault cannot close until fully empty&#xa;&#xa;âœ“ Staker gets 100% of rewards on unstake&#xa;&#xa;âœ“ Duration lock prevents early withdrawal" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="1380" y="545" width="360" height="180" as="geometry" />
				</mxCell>
				<!-- Security Notes -->
				<mxCell id="security-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="1360" y="770" width="400" height="190" as="geometry" />
				</mxCell>
				<mxCell id="security-title" value="ðŸ”’ SECURITY VALIDATIONS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#C62828;" vertex="1" parent="1">
					<mxGeometry x="1390" y="785" width="340" height="30" as="geometry" />
				</mxCell>
				<mxCell id="security-text" value="â€¢ Only designated staker can stake/unstake&#xa;&#xa;â€¢ Only provider can deposit rewards&#xa;&#xa;â€¢ Duration lock enforced by blockchain time&#xa;&#xa;â€¢ Min/max amounts validated on every stake&#xa;&#xa;â€¢ Vault must be empty (balance = 0) to close&#xa;&#xa;â€¢ NFT ownership = vault position ownership" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#424242;" vertex="1" parent="1">
					<mxGeometry x="1380" y="825" width="360" height="120" as="geometry" />
				</mxCell>
				<!-- Account Relationships -->
				<mxCell id="relationships-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;strokeWidth=3;" vertex="1" parent="1">
					<mxGeometry x="1360" y="990" width="400" height="320" as="geometry" />
				</mxCell>
				<mxCell id="relationships-title" value="ACCOUNT RELATIONSHIPS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#3F51B5;" vertex="1" parent="1">
					<mxGeometry x="1390" y="1005" width="340" height="30" as="geometry" />
				</mxCell>
				<mxCell id="relationships-text" value="StakingVault PDA contains:&#xa;  â”œâ”€ provider: Pubkey&#xa;  â”œâ”€ staker: Pubkey&#xa;  â”œâ”€ nft_mint: Pubkey (links to MPL-Core)&#xa;  â”œâ”€ staking_mint: Pubkey&#xa;  â””â”€ reward_mint: Pubkey&#xa;&#xa;Vault Staking ATA:&#xa;  â”œâ”€ Mint: vault.staking_mint&#xa;  â””â”€ Authority: Vault PDA&#xa;&#xa;Vault Reward ATA:&#xa;  â”œâ”€ Mint: vault.reward_mint&#xa;  â””â”€ Authority: Vault PDA&#xa;&#xa;NFT Token Account:&#xa;  â”œâ”€ Mint: vault.nft_mint&#xa;  â””â”€ Owner: staker (or escrow, or buyer)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#424242;fontFamily=Courier New;" vertex="1" parent="1">
					<mxGeometry x="1380" y="1045" width="360" height="250" as="geometry" />
				</mxCell>
			</root>
		</mxGraphModel>
	</diagram>
</mxfile>